<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta author="https://github.com/Ayimsolomon">
    <title>Group AE Q(31) | Smart Reservation Portal</title>
    <link rel="stylesheet" href="style.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<nav>
    <div class="logo"><i class="fa-Home"></i> GROUP AE Q(31)</div>
    <div id="user-context"><i class="fa fa-book"></i> <a href="#reservation" style="text-decoration:none; font-weight:bold; color:black;">New Reservation</a></div>
</nav>

<div class="container">
    <img src="Chinge.png" class="hero-image" alt="Group AE Resort Hero Image">
</div>

<div class="container" id="reservation">
    <div class="progress-stepper">
        <div id="step-dot-1" class="p-step active">1. Search</div>
        <div id="step-dot-2" class="p-step">2. Book</div>
        <div id="step-dot-3" class="p-step">3. In-Stay</div>
        <div id="step-dot-4" class="p-step">4. Out</div>
    </div>

    <div id="view-reserve" class="card active">
        <h2>Make a Reservation</h2>
        <div class="form-row" style="margin-bottom: 1rem;">
    <div>
        <label>Check-in Date</label>
        <input type="date" id="checkin" onchange="calculateNights()">
    </div>
    <div>
        <label>Check-out Date</label>
        <input type="date" id="checkout" onchange="calculateNights()">
    </div>
</div>
<div id="nights-display" style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">
    Duration: 0 nights
</div>
    
        <label>Room Type</label>
        <div class="room-grid">
            <div class="room-option" onclick="selectRoom(this, 'Superior King', 22500)">
                <div class="room-img" style="background: url('https://images.unsplash.com/photo-1611892440504-42a792e24d32?auto=format&fit=crop&w=300&q=80') center/cover;"></div>
                <div class="room-info">
                    <strong>Superior King</strong><br>
                    <small>#22500 / night</small>
                </div>
            </div>
            <div class="room-option" onclick="selectRoom(this, 'Deluxe Suite', 45000)">
                <div class="room-img" style="background: url('https://images.unsplash.com/photo-1590490360182-c33d57733427?auto=format&fit=crop&w=300&q=80') center/cover;"></div>
                <div class="room-info">
                    <strong>Deluxe Suite</strong><br>
                    <small>#45000 / night</small>
                </div>
            </div>
        </div>
        <div style="margin-top: 1.5rem;">
            <button class="btn" onclick="goToGuestInfo()">Continue to Details</button>
        </div>
    </div>

    <div id="view-guest" class="card">
        <h2>Guest Details</h2>
        <div class="form-row">
            <div>
                <label>First Name</label>
                <input type="text" id="fname" placeholder="John">
            </div>
            <div>
                <label>Last Name</label>
                <input type="text" id="lname" placeholder="Doe">
            </div>
        </div>
        <div class="form-group">
            <label>Email Address</label>
            <input type="email" id="email" placeholder="john@example.com">
        </div>
        <div style="background: #fdfaf5; padding: 1rem; border-radius: 8px; margin: 1rem 0; border: 1px solid var(--accent);">
            <strong>Summary:</strong> <span id="summary-text">Superior King x 2 Nights</span>
            <div class="total" id="summary-price">#45000.00</div>
        </div>
        <button class="btn" onclick="processBooking()">Confirm Reservation</button>
    </div>

   <div id="view-success" class="card" style="text-align: center;">
    <div style="font-size: 3rem;">âœ¨</div>
    <h2>Reservation Confirmed!</h2>
    <p>Your Booking ID is: <strong id="res-id">Generating...</strong></p>
    <p>Check-in is available now via your mobile device.</p>
    <button class="btn" onclick="startCheckIn()">Start Digital Check-In</button>
</div>

    <div id="view-portal" class="card">
    <h2>Welcome to Room <span id="room-display">...</span></h2>
    <p>You are currently checked in. Use the buttons below to manage your stay.</p>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <button class="btn btn-secondary">Order Service</button>
        <button class="btn btn-secondary">Digital Key</button>
    </div>
    <button class="btn" style="margin-top: 1.5rem;" onclick="showCheckout()">Proceed to Check-Out</button>
</div>

    <div id="view-checkout" class="card">
        <h2>Final Folio</h2>
        <table>
            <tbody id="bill-items">
                </tbody>
        </table>
        <button class="btn" onclick="finishEverything()">Pay & Complete Stay</button>
    </div>

    <div id="view-end" class="card" style="text-align: center;">
        <h2>Safe Travels!</h2>
        <p>A receipt has been sent to your email.</p>
        <button class="btn btn-secondary" onclick="location.reload()">New Booking</button>
    </div>

    <button onclick="showBookingForm()">Contributors/trustee's</button>

    <div id="bookingSection">
    <div class="header-info">
        <h2>KASU School of Continuing Education</h2>
        <p><strong>CSC Department | IFSCE208</strong></p>
        <p>Group AE Assignment - Question 31</p>
    </div>

    <hr style="margin-top: 30px;">
    <small><strong>Group Members:</strong> Ishaku Simon, Ibe Chukwuka Kingsley, Ike Blessing, and others.</small>
</div>
</div>
<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h4>About Group AE</h4>
            <p>Providing seamless digital reservation experiences for modern travelers since 2024.</p>
        </div>
        <div class="footer-section">
            <h4>Quick Links</h4>
            <p><a href="#">Support Center</a></p>
            <p><a href="#">Privacy Policy</a></p>
            <p><a href="#">Terms of Service</a></p>
        </div>
        <div class="footer-section">
            <h4>Contact</h4>
            <p><i class="fas fa-envelope"></i> help@group-ae.com</p>
            <p><i class="fas fa-phone"></i> +1 (555) 000-1234</p>
        </div>
    </div>
    <div class="footer-bottom">
        &copy; 2026 Group AE Q(31) Smart Reservation Portal. All rights reserved.
    </div>
</footer>
    <script>
        function showBookingForm() {
        // Get the hidden div by its ID
        var x = document.getElementById("bookingSection");
        
        // Change the display style to block to make it visible
        if (x.style.display === "none" || x.style.display === "") {
            x.style.display = "block";
        } else {
            x.style.display = "none"; // This allows it to toggle back and forth
        }
    }
    let bookingData = {
        roomType: '',
        pricePerNight: 0,
        nights: 0,
        total: 0,
        guestName: ''
    };

    function showView(id, step) {
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
        const el = document.getElementById(id);
        if (el) el.classList.add('active');

        if (step) {
            document.querySelectorAll('.p-step').forEach(s => s.classList.remove('active'));
            const dot = document.getElementById(`step-dot-${step}`);
            if (dot) dot.classList.add('active');
        }
    }

    function calculateNights() {
        const checkinVal = document.getElementById('checkin').value;
        const checkoutVal = document.getElementById('checkout').value;

        if (checkinVal && checkoutVal) {
            const start = new Date(checkinVal);
            const end = new Date(checkoutVal);

            // Calculate difference in milliseconds and convert to days
            const diffInTime = end.getTime() - start.getTime();
            const diffInDays = Math.ceil(diffInTime / (1000 * 3600 * 24));

            if (diffInDays > 0) {
                bookingData.nights = diffInDays;
                document.getElementById('nights-display').innerText = `Duration: ${diffInDays} nights`;

                // Update total if a room is already selected
                if (bookingData.pricePerNight > 0) {
                    bookingData.total = bookingData.pricePerNight * bookingData.nights;
                } else {
                    bookingData.total = 0;
                }

                // Update visible summary if present
                if (bookingData.roomType) {
                    document.getElementById('summary-text').innerText = `${bookingData.roomType} (${bookingData.nights} Nights)`;
                    document.getElementById('summary-price').innerText = `#${bookingData.total.toFixed(2)}`;
                }
            } else {
                alert("Check-out date must be after check-in date.");
                document.getElementById('checkout').value = '';
                bookingData.nights = 0;
                bookingData.total = 0;
                document.getElementById('nights-display').innerText = `Duration: 0 nights`;
                document.getElementById('summary-price').innerText = `#0.00`;
            }
        }
    }

    function selectRoom(el, type, price) {
        document.querySelectorAll('.room-option').forEach(r => r.classList.remove('selected'));
        el.classList.add('selected');
        bookingData.roomType = type;
        bookingData.pricePerNight = price;

        // Recalculate total immediately upon selection
        bookingData.total = bookingData.nights > 0 ? price * bookingData.nights : 0;

        // Update visible summary
        document.getElementById('summary-text').innerText = `${bookingData.roomType} (${bookingData.nights} Nights)`;
        document.getElementById('summary-price').innerText = `#${bookingData.total.toFixed(2)}`;
    }

    function goToGuestInfo() {
        if (!bookingData.roomType) return alert("Please select a room type.");
        if (bookingData.nights <= 0) return alert("Please select check-in and check-out dates.");

        document.getElementById('summary-text').innerText = `${bookingData.roomType} (${bookingData.nights} Nights)`;
        document.getElementById('summary-price').innerText = `#${bookingData.total.toFixed(2)}`;
        showView('view-guest', 2);
    }

    function processBooking(event) {
        bookingData.guestName = (document.getElementById('fname').value || '').trim() + ' ' + (document.getElementById('lname').value || '').trim();
        const btn = event && event.target ? event.target : null;
        if (btn) btn.innerText = "Booking...";

        // Generate the ID right now
        const newID = generateBookingID();
        document.getElementById('res-id').innerText = newID;

        setTimeout(() => {
            showView('view-success', 2);
            if (btn) btn.innerText = "Confirm Reservation";
        }, 1500);
    }

    // Function to generate and display a random room number
    function assignRandomRoom() {
        const min = 100;
        const max = 999;
        const randomNumber = Math.floor(Math.random() * (max - min + 1)) + min;

        // Update the HTML element
        document.getElementById('room-display').innerText = randomNumber;
    }

    // Call the function when the page finished loading
    window.onload = function() {
        assignRandomRoom();
        document.getElementById('summary-price').innerText = `#${bookingData.total.toFixed(2)}`;
    };

    function startCheckIn() {
        showView('view-portal', 3);
    }

    function showCheckout() {
        const billBody = document.getElementById('bill-items');
        const amenities = 12.50;
        billBody.innerHTML = `
                <tr><td>${bookingData.roomType} (Stay)</td><td>#${bookingData.total.toFixed(2)}</td></tr>
                <tr><td>Amenities Tax</td><td>#${amenities.toFixed(2)}</td></tr>
                <tr class="total"><td>Total Amount</td><td>#${(bookingData.total + amenities).toFixed(2)}</td></tr>
            `;
        showView('view-checkout', 4);
    }

    function finishEverything() {
        showView('view-end', 4);
    }

    function generateBookingID() {
        const characters = 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789'; // Excluded 'O' and '0' for clarity
        let result = 'LS-';
        for (let i = 0; i < 4; i++) {
            result += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return result;
    }
    </script>

</body>

</html>


